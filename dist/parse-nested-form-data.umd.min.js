!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t="undefined"!=typeof globalThis?globalThis:t||self).parseNestedFormData={})}(this,(function(t){"use strict";
/**
   * @name parse-nested-form-data
   * @license MIT license.
   * @copyright (c) 2022 Christian Schurr
   * @author Christian Schurr <chris@schurr.dev>
   */class r extends Error{constructor(t){super(`Duplicate key at path part ${t}`),this.key=void 0,this.key=t}}class e extends Error{constructor(t){super(`Mixed array at path part ${t}`),this.key=void 0,this.key=t}}function a(t){let r=t[0],e=t[1];return r.startsWith("+")?(r=r.slice(1),e=Number(e)):r.startsWith("&")?(r=r.slice(1),e="on"===e||"true"===e||Boolean(Number(e))):r.startsWith("-")&&(r=r.slice(1),e=null),{path:r,value:e}}function o(t){return Array.from(t.matchAll(/((?<array>\d*)\]|(?<pathPart>[^.[]+))(?<nextType>\[|\.|$)/g)).map((r=>{const e=r,{array:a,pathPart:o,nextType:n}=e.groups;return{path:a??o,type:void 0===a?"object":"array",default:"["===n?[]:{},pathToPart:t.slice(0,e.index+e[1].length)}}))}function n(t,a,o){if("object"===t.type){if(Array.isArray(a))throw new r(t.pathToPart);const e=a;return[e[t.path],r=>e[t.path]=r]}if(!Array.isArray(a))throw new r(t.pathToPart);const n=a,s=""!==t.path,i=o.has(n);if(s&&o.add(n),!s&&i||s&&!i&&n.length>0)throw new e(t.pathToPart);const p=s?Number(t.path):n.length;return[n[p],t=>n[p]=t]}t.DuplicateKeyError=r,t.MixedArrayError=e,t.parseFormData=function(t,e){let{removeEmptyString:s=!1,transformEntry:i=a}=void 0===e?{}:e;const p={},c=new Set;for(const e of Array.from(t)){if(s&&""===e[1])continue;const{path:t,value:f}=i(e,a),h=o(t);let l=p;h.forEach(((t,e)=>{const[a,o]=n(t,l,c);if(h.length-1===e){if(void 0!==a)throw new r(t.pathToPart);o(f)}else{if(void 0!==a&&("object"!=typeof(s=a)||Array.isArray(s)||null===s||s instanceof File)&&!Array.isArray(a))throw new r(t.pathToPart);const e=a??t.default;l=e,o(e)}var s}))}for(const t of Array.from(c))t.splice(0,t.length,...t.flat(0));return p},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=parse-nested-form-data.umd.min.js.map
